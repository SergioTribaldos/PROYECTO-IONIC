<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="product$ | async as product" slot="fixed">
  <ion-card>
    <ion-slides pager="true">
      <ion-slide *ngFor="let image of product.pictures"><img
        (click)="openDialog(image.url)"
        [src]="APIENDPOINT_BACKEND + '/' + image.url"
      /></ion-slide>
    </ion-slides>
    <ion-card-header>
      <ion-card-title>{{product.title}}</ion-card-title>
      <ion-card-subtitle color="secondary">{{product.price}} €</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <p>{{product.description}}</p>
      <ion-grid>
        <ion-row class="ion-align-items-center">
          <ion-col class="ion-justify-content-center" >
            <span class="date-published">{{ product.uploaded_at | date: "dd-LLL-yy" }}</span>
          </ion-col>
          <ion-col>
            <ion-row class="ion-justify-content-center">
              <ion-chip
                outline
                class="condition condition-big"
                [color]="setConditionClass(product.condition)"
              >{{ product.condition }}</ion-chip
              >
            </ion-row>
          </ion-col>
          <ion-col>
            <ion-row class="ion-justify-content-end">
              <span class="viewed-times-container">
                <ion-icon
                  name="eye-outline"></ion-icon>
                <span>{{ product.viewed_times }}</span>
              </span></ion-row>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>


  <ion-card>
    <ion-card-header>Localización</ion-card-header>
    <ion-card-content>
      <div
        class="map-container"
        [ngStyle]="toggleExpandMap ? { height: '400px' } : { height: '200px' }"
      >
        <app-map
          [editMode]="false"
          [currentCoords]="{ lat: product.lat, lng: product.lng }"
        ></app-map>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
<ion-footer class="ion-no-border" >
 <ion-button color="secondary" expand="block">
   Chat
 </ion-button>
</ion-footer>
<!--<div class="card-container">
  <mat-card *ngIf="product$ | async as product">
    <mat-card-content>
      <app-user-info-header [user]="product.user" [product]="product">
      </app-user-info-header>

      <div class="carousel-container">
        <ngb-carousel #carousel [interval]="0" *ngIf="product.pictures">
          <ng-template ngbSlide *ngFor="let image of product.pictures">
            <div class="picsum-img-wrapper">
              <img
                [src]="APIENDPOINT_BACKEND + '/' + image.url"
                (click)="openDialog(image.url)"
              />
            </div>
          </ng-template>
        </ngb-carousel>
      </div>

      <mat-card-header>
        <mat-card-title class="title">{{ product.title }}</mat-card-title>
        <mat-card-subtitle class="price"
          >{{ product.price }} €
        </mat-card-subtitle>
        <mat-card-subtitle
          class="condition condition-big"
          [ngClass]="setConditionClass(product.condition)"
          >{{ product.condition }}</mat-card-subtitle
        >
      </mat-card-header>

      <hr />
      <p class="description">
        {{ product.description }}
      </p>
      <hr />
      <div fxLayoutAlign="space-around center" class="misc-info-container">
        <div fxLayoutAlign="start" fxFlex="50%">
          {{ product.uploaded_at | date: "dd-LLL-yy" }}
        </div>
        <div fxLayoutAlign="end" fxFlex="50%">
          <div class="product-viewed-container">
            <span class="material-icons"> remove_red_eye </span
            ><span>{{ product.viewed_times }}</span>
          </div>
        </div>
      </div>
      <hr />
    </mat-card-content>
    <h2>
      Localización
      <small>(Doble click para expandir el mapa)</small>
    </h2>
    <div
      class="map-container"
      (dblclick)="expandMap()"
      [ngStyle]="toggleExpandMap ? { height: '400px' } : { height: '200px' }"
    >
      <app-map
        [editMode]="false"
        [currentCoords]="{ lat: product.lat, lng: product.lng }"
      ></app-map>
    </div>
  </mat-card>
</div>-->
